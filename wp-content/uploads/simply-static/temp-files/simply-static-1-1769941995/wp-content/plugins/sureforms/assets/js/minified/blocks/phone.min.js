function validateCountryWithFilters(e,t,i,r,n){return"true"!==t?e:(t=e.toLowerCase(),"include"===i&&0<r.length?r.includes(t)?t:r[0]:"exclude"===i&&0<n.length?n.includes(t)?n.includes("us")?"gb":"us":t:e)}function initializePhoneField(){document.querySelectorAll(".srfm-phone-block").forEach(e=>{let n=e.querySelector(".srfm-input-phone"),o=("true"===n.getAttribute("data-srfm-phone-initialized")&&cleanupPhoneFields(e),n.setAttribute("data-srfm-phone-initialized","true"),e.querySelector(".srfm-error-message"));var t=n.getAttribute("auto-country"),i=n.getAttribute("default-country");let r=n.getAttribute("name"),u=n.getAttribute("data-enable-country-filter"),l=n.getAttribute("data-country-filter-type");var a=n.getAttribute("data-include-countries"),s=n.getAttribute("data-exclude-countries");let c=[],d=[];if("true"===u)try{"include"===l&&a&&(c=JSON.parse(a)),"exclude"===l&&s&&(d=JSON.parse(s))}catch(e){console.error("Error parsing country filter data:",e)}a={autoPlaceholder:"off",separateDialCode:!0,hiddenInput:()=>({phone:r}),countrySearch:!0,initialCountry:validateCountryWithFilters(i||"us",u,l,c,d),allowPhonewords:!0};"true"===t&&(a.initialCountry="auto",a.geoIpLookup=function(t){fetch("https://ipapi.co/json").then(function(e){return e.json()}).then(function(e){e=validateCountryWithFilters(e.country_code?e.country_code.toLowerCase():"us",u,l,c,d);t(e)}).catch(function(){var e=validateCountryWithFilters("us",u,l,c,d);t(e)})}),"true"===u&&("include"===l&&0<c.length?a.onlyCountries=c:"exclude"===l&&0<d.length&&(a.excludeCountries=d));let h=window.intlTelInput(n,a),f=h?.countryList.querySelectorAll(".iti__country");s=e.querySelector(".iti__selected-country-primary"),i=e.querySelector(".iti__selected-dial-code"),i&&i.setAttribute("aria-hidden","true"),srfm_submit?.is_rtl?s.style.paddingLeft="0":s.style.paddingRight="0",t=()=>{var e=n?.value?n?.value.trim():"",t=n.closest(".srfm-block"),i=h.getNumber(),r=i&&window.intlTelInput?.utils?.isValidNumber(i);e&&!r?(t.classList.add("srfm-phone-error"),window?.srfm?.toggleErrorState(t,!0),o.textContent=window?.srfm_submit?.messages?.srfm_valid_phone_number,h.hiddenInput.value=h.telInput.value):(t.classList.remove("srfm-phone-error"),window?.srfm?.toggleErrorState(t,!1),h.hiddenInput.value=i||"")},a=h.telInput.getAttribute("data-unique");a&&h.hiddenInput.setAttribute("data-unique",""+a),n&&(n.addEventListener("input",t),n.addEventListener("countrychange",t),n.addEventListener("open:countrydropdown",()=>{var e=h.getSelectedCountryData();e&&(f.forEach(e=>{e.classList.contains("iti__active")&&e.classList.remove("iti__active")}),e=h?.countryList.querySelector(`.iti__country[data-country-code="${e.iso2}"]`))&&(e.classList.add("iti__active"),e.scrollIntoView({block:"nearest",behavior:"instant"}))})),itiContainerClass(e)})}function isMobileDevice(){return window.innerWidth<=768}function itiContainerClass(t){if(isMobileDevice()){let e=t.closest("form").getAttribute("form-id");t.querySelector(".iti__selected-country").addEventListener("click",()=>{document.querySelector(".iti--container")?.classList.add("srfm-form-container-"+e)})}}function cleanupPhoneFields(e=document){e.querySelectorAll(".srfm-input-phone").forEach(e=>{try{var t=e.closest(".iti");t&&t.parentNode&&(t.parentNode.insertBefore(e,t),t.remove()),e.removeAttribute("data-srfm-phone-initialized")}catch(e){console.warn("Error cleaning up phone field:",e)}})}window.srfmInitializePhoneField=initializePhoneField,window.srfmCleanupPhoneFields=cleanupPhoneFields,document.addEventListener("srfm_form_before_submission",e=>{var t,e=e.detail?.form;e&&(t=e.querySelectorAll(".srfm-input-phone"))&&0!==t.length&&(cleanupPhoneFields(e),setTimeout(()=>{initializePhoneField()},100))});